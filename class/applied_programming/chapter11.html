<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>マウスとキーボード</title>
  <meta name="description" content="椙山女学園大学 向研究室のブログです。日常の記録に加えて、授業資料などを公開しています。">

  <link rel="stylesheet" href="/css/main.css">
  <!-- <link rel="stylesheet" href="/css/style.css"> -->
  <link rel="canonical" href="http://mukai-lab.info//class/applied_programming/chapter11.html">
  <link rel="alternate" type="application/rss+xml" title="M's Lab." href="http://mukai-lab.info//feed.xml">

  <!-- Faviconの実装 -->
  <link rel="shortcut icon" href="/favicon.ico" type="image/vnd.microsoft.icon">
  <link rel="icon" href="/favicon.ico" type="image/vnd.microsoft.icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon/favicon-48x48.png" sizes="48x48">
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32">
  <link rel="manifest" href="favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#2d88ef">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">

  <!-- Mathjax -->
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <!-- OGP -->
  
  <meta property="og:image" content="https://i.gyazo.com/ff9782f1af234f83699046c458ec5eac.png">
  
</head>

<!-- Facebookいいねボタンの実装 -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Twitterボタンの実装 -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <!-- <a class="site-title" href="/">M's Lab.</a> -->
    <a class="site-title" href="/">
        <img src="/favicon/favicon.png" height="50px" style="margin-bottom:10px;margin-right:2px">
        <span style="color:#00606D;font-weight:bold">M</span>'s Lab.
        <!-- <img src="/img/Top.png" style="margin-bottom:10px;margin-left:10px"> -->
    </a>

    <nav class="site-nav">

      <!-- <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a> -->

      <div class="trigger">
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
                <a class="page-link" href="/class.html">担当科目</a>
            
          
        
          
        
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
        
          
            
                <a class="page-link" href="/profile.html">登場人物</a>
            
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">マウスとキーボード</h1>
    <div class="fb-like" data-href="http://naoto-github.github.io//class/applied_programming/chapter11.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
  </header>
  </header>

  <div class="post-content">
    <p><a href="https://gyazo.com/ff9782f1af234f83699046c458ec5eac"><img src="https://i.gyazo.com/ff9782f1af234f83699046c458ec5eac.png" alt="https://gyazo.com/ff9782f1af234f83699046c458ec5eac" /></a></p>

<h1 id="img-stylemargin-right5pxmargin-bottom7px-srcfaviconfavicon-25x25png"><img style="margin-right:5px;margin-bottom:7px" src="/favicon/favicon-25x25.png" />プロジェクトの準備</h1>

<p>Eclipseで新規にプロジェクトを作成しましょう。
メニューから[ファイル]-[新規]-[Javaプロジェクト]をクリックして、「新規Javaプロジェクトの作成」を開きます。
ここでは、プロジェクト名に”Project11”を入力して、[完了]をクリックしましょう。
パッケージ・エクスプローラに作成したプロジェクトが表示されていることを確認してください。</p>

<p><a href="https://gyazo.com/92c204aaa4d46746026edba88b722ed7"><img src="https://i.gyazo.com/92c204aaa4d46746026edba88b722ed7.png" alt="https://gyazo.com/92c204aaa4d46746026edba88b722ed7" /></a></p>

<p><strong>Application</strong>クラスを継承した<strong>MyApplication</strong>クラスを作成しましょう。
メニューから[ファイル]-[新規]-[クラス]をクリックして、「新規Javaクラス」を開きます。 まず、名前に”MyApplication”を入力します。
次に<strong>スーパークラス</strong>を設定するために、[参照]ボタンから「スーパークラスの選択」を開き、
一致する項目から<strong>javafx.application.Application</strong>を選択して、[OK]をクリックします。
最後に[完了]をクリックしましょう。</p>

<p><a href="https://gyazo.com/d9c737e5ac5dd58d9618be3117c73d0c"><img src="https://i.gyazo.com/d9c737e5ac5dd58d9618be3117c73d0c.png" alt="https://gyazo.com/d9c737e5ac5dd58d9618be3117c73d0c" /></a></p>

<p>Applicationクラスの抽象メソッドである<strong>startメソッド</strong>をオーバーライドしておきます。
下記コードを参考に、タイトルを<strong>Project 11</strong>、幅を<strong>500px</strong>、高さを<strong>500px</strong>に設定しましょう。
プログラムの実行後にウィンドウが表示されることを確認してください。</p>

<script src="https://gist.github.com/naoto-github/b2b00a3eff45be2965c7.js"> </script>

<p><a href="https://gyazo.com/809f4689b12d3edb99481f2f9e12e575"><img src="https://i.gyazo.com/809f4689b12d3edb99481f2f9e12e575.png" alt="https://gyazo.com/809f4689b12d3edb99481f2f9e12e575" /></a></p>

<h1 id="img-stylemargin-right5pxmargin-bottom7px-srcfaviconfavicon-25x25png-1"><img style="margin-right:5px;margin-bottom:7px" src="/favicon/favicon-25x25.png" />マウス・イベント</h1>

<p>今回はマウス操作に応じてキャンバスに絵を描くことに挑戦していきましょう。
前準備として、下記のコードを参考に<strong>Canvasクラス</strong>をウィンドウに配置してください。
レイアウトペインとして<strong>VBoxクラス</strong>を利用しています。
プログラムの実行後に表示されるウィンドウを確認してください。</p>

<script src="https://gist.github.com/naoto-github/fed3810da487411a4246.js"> </script>

<p><a href="https://gyazo.com/c2df521649531c9264d5454d0a12f90c"><img src="https://i.gyazo.com/c2df521649531c9264d5454d0a12f90c.png" alt="https://gyazo.com/c2df521649531c9264d5454d0a12f90c" /></a></p>

<p>キャンバス上でのマウスのクリックを検知するには、
<code class="highlighter-rouge">setOnMouseClicked)</code>メソッドを利用します。
このメソッドの引数には<strong>ラムダ式</strong>を利用して下記のように記述します。
ラムダ式の左側の<em>event</em>は<strong>MouseEvent</strong>クラスのインスタンスで、
マウスの状態や位置などの情報を保持しています。
一方、ラムダ式の右側の<code class="highlighter-rouge">paint(event);</code>はマウスがクリックされたときに呼び出されるメソッドです。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>canvas.setOnMouseClicked(event -&gt; paint(event));
</code></pre>
</div>

<p>下記のコードを参考に、マウスがクリックされると、クリックされた位置に緑色の円を描いてみましょう。
円を描くコードは<code class="highlighter-rouge">paint(event)</code>メソッドとして定義していることに注意してください。
マウスの位置はMouseEventクラスの<code class="highlighter-rouge">getX()</code>メソッドと<code class="highlighter-rouge">getY()</code>メソッドで取得しています。
プログラムの実行後に、キャンバスをクリックすると、円が描かれることに確認してください。</p>

<script src="https://gist.github.com/naoto-github/ee392067c12d24493433.js"> </script>

<p><a href="https://gyazo.com/1d3a628d1aa9264f0abcdee6d631d204"><img src="https://i.gyazo.com/1d3a628d1aa9264f0abcdee6d631d204.gif" alt="https://gyazo.com/1d3a628d1aa9264f0abcdee6d631d204" /></a></p>

<h1 id="img-stylemargin-right5pxmargin-bottom7px-srcfaviconfavicon-25x25png-2"><img style="margin-right:5px;margin-bottom:7px" src="/favicon/favicon-25x25.png" />キーボード・イベント</h1>

<p>ウィンドウ上でのマウスのクリックを検知するには、<code class="highlighter-rouge">setOnKeyPressed()</code>メソッドを利用します。
このメソッドの引数には<strong>ラムダ式</strong>を利用して下記のように記述します。
ラムダ式の左側の<em>event</em>は<strong>KeyEvent</strong>クラスのインスタンスで、
押されたキーの状態や種類などの情報を保持しています。
一方、ラムダ式の右側の<code class="highlighter-rouge">change(event);</code>はキーが押されたときに呼び出されるメソッドです。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>scene.setOnKeyPressed(event -&gt; change(event));
</code></pre>
</div>

<p>下記のコードを参考に、<strong>F1キー</strong>または<strong>F2キー</strong>を押すと、
描く図形を<strong>円</strong>と<strong>矩形</strong>に切り替えられるようにしましょう。
押されたキーの種類は<code class="highlighter-rouge">getCode()</code>メソッドで取得しています。
キーがF1のときに、変数<em>type</em>に0を代入し、F2のときに1を代入します。
<code class="highlighter-rouge">paint()</code>メソッドで、この変数<em>type</em>に応じて、円を描く<code class="highlighter-rouge">fillOval()</code>メソッドと
矩形を描く<code class="highlighter-rouge">fillRect()</code>メソッドを切り替えています。
プログラムの実行後に、円と矩形を切り替えられることを確認してください。</p>

<script src="https://gist.github.com/naoto-github/fe377f53f5b397e20d14.js"> </script>

<p><a href="https://gyazo.com/0528631ecff5c67e071ef51c18a87e08"><img src="https://i.gyazo.com/0528631ecff5c67e071ef51c18a87e08.gif" alt="https://gyazo.com/0528631ecff5c67e071ef51c18a87e08" /></a></p>

<h1 id="img-stylemargin-right5pxmargin-bottom7px-srcfaviconfavicon-25x25png-3"><img style="margin-right:5px;margin-bottom:7px" src="/favicon/favicon-25x25.png" />課題</h1>

<p>塗りつぶしの色を、F3を押すと<strong>赤</strong>、F4を押すと<strong>青</strong>、F5を押すと<strong>緑</strong>に、切り替えられるようにしましょう。
課題が完成したら、作成したプロジェクトを実行可能JARファイルの形式でファイルに保存（エクスポート）してください。</p>

<p><a href="https://gyazo.com/45e2e3b936116e60abb65889e0c6129c"><img src="https://i.gyazo.com/45e2e3b936116e60abb65889e0c6129c.gif" alt="https://gyazo.com/45e2e3b936116e60abb65889e0c6129c" /></a></p>

<h3>エクスポートの注意</h3>

<p>
    JavaFXを利用したGUIアプリケーションを実行可能JARファイル形式でエクスポートする前に、
    下記のコードをMyApplicationクラスに記述してください。
    このコードがないと正常にエクスポートできない可能性があります。
</p>

<script src="https://gist.github.com/naoto-github/d88625751b695e660adb.js"> </script>

<h3>参考文献</h3>

<ul>
    <li>中山清喬(2014)『スッキリわかるJava入門 入門編 第2版』インプレス </li>
    <li>中山清喬(2014)『スッキリわかるJava入門 実践編 第2版』インプレス </li>
    <li>日向俊二(2015)『JavaFX &amp; Java8 プログラミング Javaによる新しいGUI プログラミング入門』カットシステム</li>
</ul>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">
        <!-- <div style="margin-bottom:0px"><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a></div>
        <div class="fb-like" data-href="http://naoto-github.github.io/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div> -->
    </h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li>M's Lab.</li> -->
          <!-- <li><a href="mailto:nmukai@sugiyama-u.ac.jp">nmukai@sugiyama-u.ac.jp</a></li> -->
          <li style="margin-bottom:5px"><div class="fb-like" data-href="http://naoto-github.github.io/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div></li>
          <li><div><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a></div></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/naoto-github"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">naoto-github</span></a>

          </li>
          

          

          
          <li>
            <a href="https://www.facebook.com/nmukai1978"><span class="icon icon--facebook"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300px" height="300px" viewBox="0 0 300 300">
	<defs>
		<style>
			.fill {fill: #3b5998;}
		</style>
	</defs>
	<path class="fill" d="M283.000,-0.000 C283.000,-0.000 17.000,-0.000 17.000,-0.000 C7.853,-0.000 -0.000,7.854 -0.000,17.000 C-0.000,17.000 -0.000,283.000 -0.000,283.000 
			 C-0.000,292.144 7.853,300.000 17.000,300.000 C17.000,300.000 161.000,300.000 161.000,300.000 C161.000,300.000 161.000,183.000 161.000,183.000 
			 C161.000,183.000 121.000,183.000 121.000,183.000 C121.000,183.000 121.000,139.000 121.000,139.000 C121.000,139.000 161.000,139.000 161.000,139.000 
			 C161.000,139.000 161.000,105.000 161.000,105.000 C161.000,66.251 183.432,45.000 218.000,45.000 C234.558,45.000 249.852,46.449 254.000,47.000 
			 C254.000,47.000 254.000,88.000 254.000,88.000 C254.000,88.000 229.000,88.000 229.000,88.000 C210.201,88.000 207.000,96.891 207.000,110.000 
			 C207.000,110.000 207.000,139.000 207.000,139.000 C207.000,139.000 252.000,139.000 252.000,139.000 C252.000,139.000 246.000,183.000 246.000,183.000 
			 C246.000,183.000 207.000,183.000 207.000,183.000 C207.000,183.000 207.000,300.000 207.000,300.000 C207.000,300.000 283.000,300.000 283.000,300.000 
			 C292.144,300.000 300.000,292.144 300.000,283.000 C300.000,283.000 300.000,17.000 300.000,17.000 C300.000,7.854 292.144,-0.000 283.000,-0.000 Z"/>
</svg>
</span><span class="username">nmukai1978</span></a>

          </li>
          

        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>椙山女学園大学 向研究室のブログです。日常の記録に加えて、授業資料などを公開しています。</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
